<div class="grid">
  <div class="col-12">
    <div class="card">
      <p-toolbar *ngIf="isRegisterItem" styleClass="mb-4">
        <ng-template pTemplate="left">
          <div class="my-2">
            <button
              pButton
              pRipple
              label="Cadastrar"
              icon="pi pi-plus"
              class="p-button mr-2"
              (click)="registerItem()"></button>
          </div>
        </ng-template>
      </p-toolbar>

      <div class="card">
        <div class="flex justify-content-between flex-column sm:flex-row mb-3">
          <button
            pButton
            label="Limpar filtro"
            class="p-button-outlined mb-2"
            icon="pi pi-filter-slash"
            (click)="clear()"></button>
          <span class="p-input-icon-left mb-2">
            <i class="pi pi-search"></i>
            <input
              #filter
              pInputText
              type="text"
              (input)="onGlobalFilter($event)"
              [ngModel]="value | titlecase"
              [placeholder]="defaultFilter.name"
              class="w-full" />
          </span>
        </div>

        <div
          *ngIf="datas == null"
          class="flex justify-content-center flex-wrap">
          <p>Nenhum registro cadastrado</p>
        </div>

        <p-table
          #table
          [columns]="columns"
          [value]="datas?.content"
          [rowHover]="true"
          [paginator]="datas != null"
          [rows]="10"
          [lazy]="true"
          (onLazyLoad)="find($event)"
          [showCurrentPageReport]="true"
          [totalRecords]="totalRecords"
          [rowsPerPageOptions]="[10, 25, 50]"
          [loading]="loading.value"
          currentPageReportTemplate="Total de Itens {totalRecords}"
          [tableStyle]="{ 'min-width': '55rem' }"
          [sortField]="defaultSort.field"
          [sortOrder]="-1"
          [globalFilterFields]="[defaultFilter.field]">
          <ng-template pTemplate="header" let-columns>
            <tr *ngIf="datas != null">
              <th
                *ngFor="let column of columns"
                pSortableColumn="{{ column.field }}">
                {{ column.name }}
                <p-sortIcon field="{{ column.field }}"></p-sortIcon>
              </th>
              <th
                *ngIf="isSearchItem || isEditItem || isDeleteItem"
                class="col-1"></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-item let-columns="columns">
            <tr>
              <td *ngFor="let column of columns">{{ item[column.field] }}</td>
              <td *ngIf="isSearchItem || isEditItem || isDeleteItem">
                <div class="flex">
                  <button
                    *ngIf="isSearchItem"
                    pButton
                    pRipple
                    icon="pi pi-search"
                    class="p-button-rounded p-button-outlined p-button-help mr-2"
                    (click)="searchItem(item)"></button>
                  <button
                    *ngIf="isEditItem"
                    pButton
                    pRipple
                    icon="pi pi-pencil"
                    class="p-button-rounded p-button-outlined p-button-success mr-2"
                    (click)="editItem(item)"></button>
                  <button
                    *ngIf="isDeleteItem"
                    pButton
                    pRipple
                    icon="pi pi-trash"
                    class="p-button-rounded p-button-outlined p-button-danger"
                    (click)="deleteItem(item)"></button>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
</div>
